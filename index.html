<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StockSense AI â€” Live Trading Dashboard</title>
  <link rel="stylesheet" href="style.css?v=6" />
  <!-- Razorpay Checkout Script -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
</head>

<body>

  <!-- Wallet Modal (imported from wallet.html) -->
  <div id="walletPanel" class="wallet-panel hidden">
    <div class="wallet-panel-content">
      <span class="wallet-close" onclick="closeWallet()">&times;</span>
      <h2>Wallet</h2>
      <div class="wallet-balance">
        <span>Balance:</span>
        <span id="walletBalance">â‚¹10,000.00</span>
      </div>
      <div class="wallet-actions">
        <button onclick="showAddMoney()">Add Money</button>
        <button onclick="showWithdrawMoney()">Withdraw</button>
      </div>
      <div id="walletActionArea"></div>
      <div id="walletMessage" class="wallet-message hidden"></div>
    </div>
  </div>

  <nav class="topbar">
    <div class="brand">ğŸ“ˆ <span>StockSense AI</span></div>
    <div class="search-area">
      <div class="search-wrapper">
        <input id="tickerInput" type="text" placeholder="Search stockâ€¦ (e.g. Tata, Reliance, INFY)" spellcheck="false"
          autocomplete="off" />
        <div class="search-dropdown hidden" id="searchDropdown"></div>
      </div>
      <button id="analyzeBtn" onclick="loadTicker()">Analyze</button>
    </div>
    <div class="nav-tabs">
      <button class="nav-tab active" onclick="switchTab('charts')">ğŸ“Š Charts</button>
      <button class="nav-tab" onclick="switchTab('trading')">ğŸ¤– Auto Trade</button>
      <button class="btn-wallet nav-btn" onclick="showWallet()">ğŸ’° Wallet</button>
      <button class="btn-trade nav-btn" onclick="executeManualTrade()">ğŸ›’ Trade</button>
    </div>
    <div class="live-badge" id="liveBadge">
      <span class="dot"></span> LIVE
    </div>
  </nav>

  <div class="market-bar" id="marketBar">
    <div class="market-bar-inner">
      <div class="market-item" id="mktStock">
        <span class="mkt-label" id="mktStockLabel">STOCK</span>
        <span class="mkt-price" id="mktStockPrice">â€”</span>
        <span class="mkt-change" id="mktStockChange">â€”</span>
      </div>
      <div class="market-sep">â”‚</div>
      <div class="market-item">
        <span class="mkt-label">NIFTY 50</span>
        <span class="mkt-price" id="mktNiftyPrice">â€”</span>
        <span class="mkt-change" id="mktNiftyChange">â€”</span>
      </div>
      <div class="market-sep">â”‚</div>
      <div class="market-item">
        <span class="mkt-label">SENSEX</span>
        <span class="mkt-price" id="mktSensexPrice">â€”</span>
        <span class="mkt-change" id="mktSensexChange">â€”</span>
      </div>
    </div>
  </div>


  <section class="price-banner hidden" id="priceBanner">
    <div class="price-main">
      <h1 id="bannerName">â€”</h1>
      <span class="price-value" id="bannerPrice">0.00</span>
      <span class="price-change" id="bannerChange">0.00 (0.00%)</span>
    </div>
    <div class="price-stats">
      <div><label>Open</label><span id="statOpen">â€”</span></div>
      <div><label>High</label><span id="statHigh">â€”</span></div>
      <div><label>Low</label><span id="statLow">â€”</span></div>
      <div><label>Vol</label><span id="statVol">â€”</span></div>
      <div><label>52W H</label><span id="stat52H">â€”</span></div>
      <div><label>52W L</label><span id="stat52L">â€”</span></div>
    </div>
  </section>


  <div id="chartsTab" class="tab-content">
    <div class="dashboard">
      <div class="chart-area">
        <div class="timeframe-bar">
          <button class="tf-btn active" data-tf="1d">1D</button>
          <button class="tf-btn" data-tf="5d">5D</button>
          <button class="tf-btn" data-tf="1mo">1M</button>
          <button class="tf-btn" data-tf="3mo">3M</button>
          <button class="tf-btn" data-tf="1y">1Y</button>
          <button class="tf-btn" data-tf="2y">2Y</button>
        </div>
        <div class="chart-container" id="mainChartWrap">
          <canvas id="mainChart"></canvas>
          <div class="chart-empty-state" id="chartEmptyState">
            <div class="empty-icon">ğŸ“ˆ</div>
            <h3>Explore Any Stock</h3>
            <p>Search for a stock above or pick one from <strong>High Potential Stocks</strong> to view charts, analysis
              & AI insights.</p>
            <div class="empty-hint">Try: <span
                onclick="document.getElementById('tickerInput').focus()">RELIANCE.NS</span> Â· <span
                onclick="document.getElementById('tickerInput').focus()">TCS.NS</span> Â· <span
                onclick="document.getElementById('tickerInput').focus()">TATAMOTORS.NS</span></div>
          </div>
        </div>
        <div class="chart-container volume-chart"><canvas id="volumeChart"></canvas></div>

        <div class="prediction-section hidden" id="predSection">
          <h3>ğŸ¤– Next 5-Day Price Forecast</h3>

          <div class="pred-loader" id="predLoader">
            <div class="pred-loader-inner">
              <div class="neural-dots">
                <span></span><span></span><span></span><span></span><span></span>
              </div>
              <div class="loader-brain">ğŸ§ </div>
              <p class="loader-title">AI Model Training</p>
              <p class="loader-sub" id="predLoaderMsg">Analyzing patterns with 10-feature LSTM...</p>
              <div class="loader-bar">
                <div class="loader-bar-fill"></div>
              </div>
            </div>
          </div>
          <div class="chart-container" id="predChartWrap"><canvas id="predChart"></canvas></div>
          <div class="pred-metrics">
            <div class="metric-card">
              <span class="m-label">Confidence</span>
              <span class="m-value" id="predConf">â€”</span>
            </div>
            <div class="metric-card">
              <span class="m-label">Risk Level</span>
              <span class="m-value" id="predRisk">â€”</span>
            </div>
            <div class="metric-card">
              <span class="m-label">Day 1 Forecast</span>
              <span class="m-value" id="predDay1">â€”</span>
            </div>
            <div class="metric-card">
              <span class="m-label">Day 5 Forecast</span>
              <span class="m-value" id="predDay5">â€”</span>
            </div>
          </div>
        </div>
      </div>

      <aside class="sidebar">
        <div class="panel">
          <h3>ğŸ”¥ High Potential Stocks</h3>
          <p class="panel-sub">Ranked by momentum + indicators</p>
          <div id="hpLoader" class="mini-loader">Loading scanner...</div>
          <div id="hpList" class="hp-list"></div>
        </div>
        <div class="panel hidden" id="sentPanel">
          <h3>ğŸ“° News Sentiment</h3>
          <div class="sent-gauge">
            <div class="gauge-circle" id="gaugeCircle"><span id="gaugeText">â€”</span></div>
            <span class="gauge-label" id="gaugeLabel">Neutral</span>
          </div>
          <ul id="sentList" class="sent-list"></ul>
        </div>
        <div class="panel hidden" id="indPanel">
          <h3>ğŸ“Š Technical Indicators</h3>
          <table class="ind-table">
            <tbody id="indBody"></tbody>
          </table>
        </div>
      </aside>
    </div>
  </div>


  <div id="tradingTab" class="tab-content hidden">
    <div class="trading-dashboard">


      <div class="trade-grid">
        <div class="portfolio-header">
          <div class="port-card balance">
            <span class="pc-label">Portfolio Value</span>
            <span class="pc-value" id="portValue">â‚¹10,00,000.00</span>
          </div>
          <div class="port-card">
            <span class="pc-label">Cash Balance</span>
            <span class="pc-value" id="portBalance">â‚¹10,00,000.00</span>
          </div>
          <div class="port-card">
            <span class="pc-label">Unrealized P&L</span>
            <span class="pc-value" id="portUnrealized">â‚¹0.00</span>
          </div>
          <div class="port-card">
            <span class="pc-label">Realized P&L</span>
            <span class="pc-value" id="portRealized">â‚¹0.00</span>
          </div>
          <div class="port-card">
            <span class="pc-label">Win Rate</span>
            <span class="pc-value" id="portWinRate">0%</span>
          </div>
          <div class="port-card">
            <span class="pc-label">Total Trades</span>
            <span class="pc-value" id="portTrades">0</span>
          </div>
        </div>


        <div class="bot-controls">
          <div class="bot-status">
            <span class="bot-dot" id="botDot"></span>
            <span id="botStatus">Bot: OFF</span>
          </div>
          <div class="bot-buttons">
            <button class="btn-bot" id="toggleBotBtn" onclick="toggleBot()">âš¡ Auto Bot</button>
            <button class="btn-scan" onclick="runAutoScan()">ğŸ” Auto Scan</button>
            <button class="btn-reset" onclick="resetPortfolio()">ğŸ”„ Reset</button>
          </div>
        </div>


        <div class="trade-panel">
          <h3>ğŸ“‚ Open Positions</h3>
          <div class="positions-table-wrap">
            <table class="positions-table">
              <thead>
                <tr>
                  <th>Ticker</th>
                  <th>Shares</th>
                  <th>Buy Price</th>
                  <th>Current</th>
                  <th>P&L</th>
                  <th>P&L %</th>
                  <th>Stop Loss</th>
                  <th>Take Profit</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="positionsBody">
                <tr>
                  <td colspan="9" class="empty-msg">No open positions</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>


        <div class="trade-panel">
          <h3>ğŸ“‹ Trade History</h3>
          <div class="trade-log" id="tradeLog">
            <div class="empty-msg">No trades yet. Activate the bot or execute a trade.</div>
          </div>
        </div>


        <div class="trade-panel">
          <h3>âš¡ Live Trade Feed</h3>
          <div class="trade-feed" id="tradeFeed"></div>
        </div>

      </div>
    </div>
  </div>





  <section class="insights-section">
    <h2 class="section-title">ğŸŒ AI Ã— Finance â€” Did You Know?</h2>
    <div class="insights-grid">
      <div class="insight-card">
        <div class="insight-icon">ğŸ¤–</div>
        <h4>AI Handles 60-70% of Trades</h4>
        <p>Algorithmic and AI-driven systems now execute the majority of trades on major stock exchanges worldwide.</p>
      </div>
      <div class="insight-card">
        <div class="insight-icon">ğŸ§ </div>
        <h4>LSTM Remembers Patterns</h4>
        <p>Long Short-Term Memory networks can learn patterns across 60+ trading days, capturing trends that humans
          easily miss.</p>
      </div>
      <div class="insight-card">
        <div class="insight-icon">ğŸ“°</div>
        <h4>News Moves Markets</h4>
        <p>Studies show that news sentiment can predict short-term stock movements with up to 70% accuracy when combined
          with technical analysis.</p>
      </div>
      <div class="insight-card">
        <div class="insight-icon">ğŸ“Š</div>
        <h4>Bollinger Bands</h4>
        <p>When Bollinger Band width contracts, a big price move is coming. Our model uses this "squeeze" signal in its
          10-feature pipeline.</p>
      </div>
      <div class="insight-card">
        <div class="insight-icon">âš¡</div>
        <h4>Sub-Second Decisions</h4>
        <p>Once trained, our LSTM model generates 5-day forecasts in under 50ms â€” faster than any human analyst could
          process a single chart.</p>
      </div>
      <div class="insight-card">
        <div class="insight-icon">ğŸ›¡ï¸</div>
        <h4>Risk Management is Key</h4>
        <p>Professional trading firms never risk more than 2% per trade. Our bot uses stop-loss, take-profit, and
          trailing stops for protection.</p>
      </div>
    </div>
  </section>


  <section class="pipeline-section">
    <h2 class="section-title">âš™ï¸ How StockSense AI Works</h2>
    <div class="pipeline">
      <div class="pipe-step">
        <div class="pipe-num">01</div>
        <div class="pipe-icon">ğŸ“¥</div>
        <h4>Data Ingestion</h4>
        <p>2 years of OHLCV data fetched from Yahoo Finance in real-time for any stock ticker.</p>
      </div>
      <div class="pipe-arrow">â†’</div>
      <div class="pipe-step">
        <div class="pipe-num">02</div>
        <div class="pipe-icon">ğŸ“Š</div>
        <h4>Feature Engineering</h4>
        <p>10 technical indicators computed: SMA, EMA, RSI, MACD, Bollinger Bands, ATR, and Volume.</p>
      </div>
      <div class="pipe-arrow">â†’</div>
      <div class="pipe-step">
        <div class="pipe-num">03</div>
        <div class="pipe-icon">ğŸ§ </div>
        <h4>AI Prediction</h4>
        <p>3-layer LSTM neural network trained on 60-day windows predicts next 5 business days' prices.</p>
      </div>
      <div class="pipe-arrow">â†’</div>
      <div class="pipe-step">
        <div class="pipe-num">04</div>
        <div class="pipe-icon">ğŸ’¹</div>
        <h4>Smart Trading</h4>
        <p>Composite score (LSTM + Technical + Sentiment) adapts to market regime for auto BUY/SELL.</p>
      </div>
    </div>
  </section>


  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-brand">
        <span class="footer-logo">ğŸ“ˆ StockSense AI</span>
        <span class="footer-tagline">Where Machine Learning Meets Market Intelligence</span>
      </div>
      <div class="footer-tech">
        <span>Built with</span>
        <span class="tech-badge">Python</span>
        <span class="tech-badge">PyTorch</span>
        <span class="tech-badge">FastAPI</span>
        <span class="tech-badge">FinBERT</span>
        <span class="tech-badge">Chart.js</span>
      </div>
    </div>
  </footer>

  <script src="app.js?v=6"></script>
</body>

</html>
